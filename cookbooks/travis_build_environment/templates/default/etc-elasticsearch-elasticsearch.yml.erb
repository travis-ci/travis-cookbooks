# ---------------------------------- Cluster -----------------------------------
#
# Use a descriptive name for your cluster:
#
cluster.name: travis-elasticsearch

# ------------------------------------ Node ------------------------------------
#
# Use a descriptive name for the node:
#
node.name: travis-elasticsearch-node

# Add custom attributes to the node:
#
node.attr.rack: travis-ci

# ----------------------------------- Paths ------------------------------------
#
# Path to directory where to store the data (separate multiple locations by comma):
#
path.data: /var/lib/elasticsearch

# Path to log files:
#
path.logs: /var/log/elasticsearch

# ----------------------------------- Memory -----------------------------------
#
# Lock the memory on startup:
#
bootstrap.memory_lock: false

# ---------------------------------- Network -----------------------------------
#
# Set the bind address to a specific IP (IPv4 or IPv6):
#
network.host: 127.0.0.1

# Set a custom port for HTTP:
#
http.port: 9200

# --------------------------------- Discovery ----------------------------------
#
# Pass an initial list of hosts to perform discovery when this node is started:
# The default list of hosts is ["127.0.0.1", "[::1]"]
#
discovery.seed_hosts: ["127.0.0.1"]

# Bootstrap the cluster using an initial set of master-eligible nodes:
#
cluster.initial_master_nodes: ["travis-elasticsearch-node"]

# ---------------------------------- Gateway -----------------------------------
#
# Block initial recovery after a full cluster restart until N nodes are started:
#
gateway.recover_after_nodes: 1

# ---------------------------------- Various -----------------------------------
#
# Allow wildcard deletion of indices:
#
action.destructive_requires_name: false

<% if @service_enabled %>
# ---------------------------------- Service ----------------------------------
#
# When service is enabled, we ensure that it runs in the foreground
#
# Set to true to prevent Elasticsearch from stopping when SIGTERM is received
#
http.cors.enabled: true
http.cors.allow-origin: "*"
<% else %>
# Service is disabled, minimizing resources used
#
http.cors.enabled: false
<% end %>

# ---------------------------------- Security & X-Pack ---------------------------------
#
# Disable all X-Pack features for Travis CI environment
#
xpack.security.enabled: false
xpack.monitoring.enabled: false
xpack.watcher.enabled: false
xpack.ml.enabled: false
xpack.graph.enabled: false
xpack.sql.enabled: false
xpack.ilm.enabled: false
xpack.rollup.enabled: false
xpack.ccr.enabled: false
xpack.deprecation.enabled: false
xpack.license.self_generated.type: basic

# ---------------------------------- CI Settings ------------------------------
#
# Allow scripting for testing purposes
#
script.allowed_types: inline
script.allowed_contexts: search, aggs, update

# Settings for Travis testing environment
#
indices.query.bool.max_clause_count: 10240
search.max_buckets: 20000
